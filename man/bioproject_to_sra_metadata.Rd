% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/bioproject_to_sra_metadata.R
\name{bioproject_to_sra_metadata}
\alias{bioproject_to_sra_metadata}
\title{Get SRA Accessions and Metadata from BioProject ID}
\usage{
bioproject_to_sra_metadata(bioproject_id)
}
\arguments{
\item{bioproject_id}{Character string. The BioProject accession ID 
(e.g., "PRJNA123456"). Must be a valid NCBI BioProject identifier.}
}
\value{
A list containing:
  \itemize{
    \item \code{bioproject_id}: The input BioProject ID
    \item \code{total_runs}: Total number of SRA runs found for this BioProject
    \item \code{retrieved_runs}: Number of runs successfully retrieved
    \item \code{sra_run_ids}: Character vector of SRA run accessions (SRR IDs)
    \item \code{full_metadata}: Data frame with complete metadata for all runs,
      including columns such as Run, ReleaseDate, LoadDate, spots, bases, 
      avgLength, size_MB, Experiment, LibraryName, LibraryStrategy, 
      LibrarySelection, LibrarySource, LibraryLayout, Platform, Model, 
      SRAStudy, BioProject, Sample, BioSample, SampleType, TaxID, 
      ScientificName, and more.
  }
  Returns NULL if no SRA runs are found for the BioProject.
}
\description{
Retrieves all SRA (Sequence Read Archive) run accessions and associated 
metadata for a given BioProject ID from NCBI. Handles projects of any size
by using pagination and batch processing to overcome API limitations.
}
\details{
This function queries NCBI's SRA database using the rentrez package. It:
\itemize{
  \item First determines the total number of SRA runs for the BioProject
  \item Retrieves all SRA IDs using pagination (batches of 9,999) if needed
  \item Fetches detailed metadata in batches of 500 runs to respect API limits
  \item Implements rate limiting (3 requests/second) to comply with NCBI guidelines
  \item Provides progress updates for large datasets
}
}
\note{
\itemize{
  \item Requires an active internet connection
  \item Processing time increases with the number of runs (approximately 
    0.34 seconds per batch due to rate limiting)
  \item For very large projects (10,000+ runs), consider running during 
    off-peak hours
  \item NCBI may throttle requests if rate limits are exceeded
}
}
\examples{
\dontrun{
# Retrieve SRA data for a BioProject
sra_result <- bioproject_to_sra_metadata("PRJNA123456")

# Check retrieval success
if (!is.null(sra_result)) {
  cat("Total runs:", sra_result$total_runs, "\n")
  cat("Retrieved runs:", sra_result$retrieved_runs, "\n")
  
  # View first few SRA Run IDs
  head(sra_result$sra_run_ids)
  
  # View metadata structure
  str(sra_result$full_metadata)
  
  # Access specific metadata columns
  summary(sra_result$full_metadata$spots)
  table(sra_result$full_metadata$Platform)
  
  # Save results to files
  write.csv(sra_result$full_metadata, 
            "sra_metadata.csv", 
            row.names = FALSE)
  write.table(sra_result$sra_run_ids, 
              "sra_run_ids.txt",
              row.names = FALSE, 
              col.names = FALSE, 
              quote = FALSE)
}

# Handle case with no results
sra_result <- bioproject_to_sra_metadata("PRJNA999999")
if (is.null(sra_result)) {
  cat("No SRA runs found for this BioProject\n")
}
}

}
\seealso{
\itemize{
  \item \code{\link[rentrez]{entrez_search}} for NCBI database searches
  \item \code{\link[rentrez]{entrez_fetch}} for retrieving records
  \item NCBI SRA: \url{https://www.ncbi.nlm.nih.gov/sra}
  \item NCBI E-utilities: \url{https://www.ncbi.nlm.nih.gov/books/NBK25501/}
}
}
\author{
Your Name
}
